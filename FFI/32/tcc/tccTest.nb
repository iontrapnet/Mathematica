(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     16361,        384]
NotebookOptionsPosition[     15200,        342]
NotebookOutlinePosition[     15579,        359]
CellTagsIndexPosition[     15536,        356]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"Quit", "[", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.704350673855115*^9, 3.7043506761832466`*^9}}],

Cell[BoxData[
 RowBox[{"Get", "[", 
  RowBox[{"FileNameJoin", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"NotebookDirectory", "[", "]"}], ",", "\"\<tcc.m\>\""}], "}"}], 
   "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.5841575860505733`*^9, 3.584157602126607*^9}, {
  3.7043506686208987`*^9, 3.7043506713082156`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "tcc`Source", "[", 
   "\"\<double newt(double x, int n) {\n        double t = x;\n\t\tint i;\n\t\
\tfor (i = 0; i < n; ++i) {\n\t\t\tt = 0.5 * (t + x / t);\n\t\t}\n\t\treturn \
t;\n}\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"tcc`Link", "[", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", "newt", "}"}], "=", 
   RowBox[{"tcc`Def", "[", "\"\<double newt(double x, int n);\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"newt", "[", 
  RowBox[{"2.", ",", "100"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{"AbsoluteTiming", "[", 
  RowBox[{"Do", "[", 
   RowBox[{
    RowBox[{"newt", "[", 
     RowBox[{"2.", ",", "100"}], "]"}], ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", "100000"}], "}"}]}], "]"}], 
  "]"}], "\[IndentingNewLine]", 
 RowBox[{"AbsoluteTiming", "[", 
  RowBox[{"newt", "[", 
   RowBox[{"2.", ",", "100000000"}], "]"}], "]"}]}], "Input",
 CellChangeTimes->{{3.5841596095462523`*^9, 3.5841596293635664`*^9}, {
   3.584159713576849*^9, 3.584159717338807*^9}, {3.5841620246182175`*^9, 
   3.5841620662821198`*^9}, {3.5841625052282305`*^9, 3.584162530595643*^9}, 
   3.584162833527358*^9, 3.5841630101184745`*^9, {3.584163121374118*^9, 
   3.5841631255976543`*^9}, {3.5841632001601353`*^9, 
   3.5841632024816265`*^9}, {3.5841633332493143`*^9, 3.584163352638595*^9}, 
   3.5841633968075924`*^9, 3.584163543527989*^9, 3.5841635765627446`*^9, {
   3.5841643268898315`*^9, 3.5841643318754435`*^9}, {3.584164463916789*^9, 
   3.5841644818146753`*^9}, {3.5841645737729053`*^9, 3.584164574117937*^9}, {
   3.5841663159342175`*^9, 3.5841663184025087`*^9}, {3.5841666118333397`*^9, 
   3.584166616523752*^9}, {3.584541845958818*^9, 3.584541857706332*^9}, {
   3.584542536872682*^9, 3.584542544781665*^9}, 3.5845433764686446`*^9, {
   3.5846203295809155`*^9, 3.5846203979469213`*^9}}],

Cell[BoxData["6112600"], "Output",
 CellChangeTimes->{
  3.584164509095914*^9, 3.584164574982046*^9, 3.5841662601317186`*^9, {
   3.584166307902176*^9, 3.5841663202477427`*^9}, {3.5841666041083565`*^9, 
   3.5841666271530795`*^9}, 3.5841676218811455`*^9, 3.584168199272468*^9, 
   3.5845297058509154`*^9, {3.584529904776178*^9, 3.5845299129172115`*^9}, 
   3.5845299610323267`*^9, 3.58452999295133*^9, 3.58454192097935*^9, 
   3.5845421533768873`*^9, 3.584542284074785*^9, {3.5845425207816143`*^9, 
   3.58454254640287*^9}, 3.5845426639072313`*^9, 3.5845433779188275`*^9, {
   3.584543456214779*^9, 3.58454348089574*^9}, 3.5845439228966293`*^9, 
   3.5845440908198123`*^9, 3.5846192731071053`*^9, 3.584619643740485*^9, 
   3.584620147448577*^9, {3.5846203587295685`*^9, 3.5846203770352435`*^9}, 
   3.584620427527198*^9, 3.5846212575206337`*^9, 3.7043507457283993`*^9}],

Cell[BoxData["1.414213562373095`"], "Output",
 CellChangeTimes->{
  3.584164509095914*^9, 3.584164574982046*^9, 3.5841662601317186`*^9, {
   3.584166307902176*^9, 3.5841663202477427`*^9}, {3.5841666041083565`*^9, 
   3.5841666271530795`*^9}, 3.5841676218811455`*^9, 3.584168199272468*^9, 
   3.5845297058509154`*^9, {3.584529904776178*^9, 3.5845299129172115`*^9}, 
   3.5845299610323267`*^9, 3.58452999295133*^9, 3.58454192097935*^9, 
   3.5845421533768873`*^9, 3.584542284074785*^9, {3.5845425207816143`*^9, 
   3.58454254640287*^9}, 3.5845426639072313`*^9, 3.5845433779188275`*^9, {
   3.584543456214779*^9, 3.58454348089574*^9}, 3.5845439228966293`*^9, 
   3.5845440908198123`*^9, 3.5846192731071053`*^9, 3.584619643740485*^9, 
   3.584620147448577*^9, {3.5846203587295685`*^9, 3.5846203770352435`*^9}, 
   3.584620427527198*^9, 3.5846212575206337`*^9, 3.7043507457439866`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"5.0491483443148315`", ",", "Null"}], "}"}]], "Output",
 CellChangeTimes->{
  3.584164509095914*^9, 3.584164574982046*^9, 3.5841662601317186`*^9, {
   3.584166307902176*^9, 3.5841663202477427`*^9}, {3.5841666041083565`*^9, 
   3.5841666271530795`*^9}, 3.5841676218811455`*^9, 3.584168199272468*^9, 
   3.5845297058509154`*^9, {3.584529904776178*^9, 3.5845299129172115`*^9}, 
   3.5845299610323267`*^9, 3.58452999295133*^9, 3.58454192097935*^9, 
   3.5845421533768873`*^9, 3.584542284074785*^9, {3.5845425207816143`*^9, 
   3.58454254640287*^9}, 3.5845426639072313`*^9, 3.5845433779188275`*^9, {
   3.584543456214779*^9, 3.58454348089574*^9}, 3.5845439228966293`*^9, 
   3.5845440908198123`*^9, 3.5846192731071053`*^9, 3.584619643740485*^9, 
   3.584620147448577*^9, {3.5846203587295685`*^9, 3.5846203770352435`*^9}, 
   3.584620427527198*^9, 3.5846212575206337`*^9, 3.7043507507816696`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1.0344604381610598`", ",", "1.414213562373095`"}], "}"}]], "Output",
 CellChangeTimes->{
  3.584164509095914*^9, 3.584164574982046*^9, 3.5841662601317186`*^9, {
   3.584166307902176*^9, 3.5841663202477427`*^9}, {3.5841666041083565`*^9, 
   3.5841666271530795`*^9}, 3.5841676218811455`*^9, 3.584168199272468*^9, 
   3.5845297058509154`*^9, {3.584529904776178*^9, 3.5845299129172115`*^9}, 
   3.5845299610323267`*^9, 3.58452999295133*^9, 3.58454192097935*^9, 
   3.5845421533768873`*^9, 3.584542284074785*^9, {3.5845425207816143`*^9, 
   3.58454254640287*^9}, 3.5845426639072313`*^9, 3.5845433779188275`*^9, {
   3.584543456214779*^9, 3.58454348089574*^9}, 3.5845439228966293`*^9, 
   3.5845440908198123`*^9, 3.5846192731071053`*^9, 3.584619643740485*^9, 
   3.584620147448577*^9, {3.5846203587295685`*^9, 3.5846203770352435`*^9}, 
   3.584620427527198*^9, 3.5846212575206337`*^9, 3.7043507518129272`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
  "tcc`$Source", "[", 
   "\"\<double newt(double x, int n) {\n        double t = x;\n\t\tint i;\n\t\
\tfor (i = 0; i < n; ++i) {\n\t\t\tt = 0.5 * (t + x / t);\n\t\t}\n\t\treturn \
t;\n}\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"tcc`$Link", "[", "]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", "$newt", "}"}], "=", 
   RowBox[{"tcc`$Def", "[", "\"\<double newt(double x, int n);\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"$newt", "[", 
  RowBox[{"2.", ",", "100"}], "]"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{"AbsoluteTiming", "[", 
   RowBox[{"Do", "[", 
    RowBox[{
     RowBox[{"$newt", "[", 
      RowBox[{"2.", ",", "100"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "100000"}], "}"}]}], "]"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"AbsoluteTiming", "[", 
   RowBox[{"$newt", "[", 
    RowBox[{"2.", ",", "100000000"}], "]"}], "]"}], " "}]}], "Input",
 CellChangeTimes->{{3.5841596095462523`*^9, 3.5841596293635664`*^9}, {
   3.584159713576849*^9, 3.584159717338807*^9}, {3.5841620246182175`*^9, 
   3.5841620662821198`*^9}, {3.5841625052282305`*^9, 3.584162530595643*^9}, 
   3.584162833527358*^9, 3.5841630101184745`*^9, {3.584163121374118*^9, 
   3.5841631255976543`*^9}, {3.5841632001601353`*^9, 
   3.5841632024816265`*^9}, {3.5841633332493143`*^9, 3.584163352638595*^9}, 
   3.5841633968075924`*^9, 3.584163543527989*^9, 3.5841635765627446`*^9, {
   3.5841643268898315`*^9, 3.5841643318754435`*^9}, {3.584164463916789*^9, 
   3.5841644818146753`*^9}, {3.5841645737729053`*^9, 3.584164574117937*^9}, {
   3.5841663159342175`*^9, 3.5841663184025087`*^9}, {3.5841665598061376`*^9, 
   3.584166584022032*^9}, {3.584542561149747*^9, 3.584542609262882*^9}, 
   3.5845439636798134`*^9, {3.584620454773794*^9, 3.5846204596356087`*^9}}],

Cell[BoxData["9737080"], "Output",
 CellChangeTimes->{3.584166606489659*^9, 3.5845297638762903`*^9, 
  3.584542676228798*^9, 3.5845441000299826`*^9, 3.58461965198372*^9, 
  3.584620460777547*^9, 3.584621266195531*^9}],

Cell[BoxData["1.4142135623730951`"], "Output",
 CellChangeTimes->{3.584166606489659*^9, 3.5845297638762903`*^9, 
  3.584542676228798*^9, 3.5845441000299826`*^9, 3.58461965198372*^9, 
  3.584620460777547*^9, 3.584621266236536*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1.3051436999999999067`6.136258244633057", ",", "Null"}], 
  "}"}]], "Output",
 CellChangeTimes->{3.584166606489659*^9, 3.5845297638762903`*^9, 
  3.584542676228798*^9, 3.5845441000299826`*^9, 3.58461965198372*^9, 
  3.584620460777547*^9, 3.5846212675417023`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "1.7732246000000000397`6.269363660929563", ",", "1.4142135623730951`"}], 
  "}"}]], "Output",
 CellChangeTimes->{3.584166606489659*^9, 3.5845297638762903`*^9, 
  3.584542676228798*^9, 3.5845441000299826`*^9, 3.58461965198372*^9, 
  3.584620460777547*^9, 3.584621269316928*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"tcc`Reset", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "tcc`Source", "[", 
   "\"\<int cmp(void* x, void* y) {\n        return *(int*)x - *(int*)y;\n    \
}\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"tcc`Link", "[", "]"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{
   RowBox[{"list", "=", 
    RowBox[{"FFI`New", "[", 
     RowBox[{"{", 
      RowBox[{"3", ",", "1", ",", "2", ",", "4"}], "}"}], "]"}]}], 
   ";"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FFI`LibC", "@", 
   RowBox[{"qsort", "[", 
    RowBox[{"list", ",", "4", ",", "4", ",", 
     RowBox[{"tcc`Get", "[", "\"\<cmp\>\"", "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{"FFI`Read", "[", 
   RowBox[{"list", ",", "\"\<int\>\"", ",", "4"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"FFI`ReleaseData", "[", "list", "]"}], ";"}], " "}]}], "Input",
 CellChangeTimes->{{3.584164642653807*^9, 3.5841647287325535`*^9}, {
  3.584164766920976*^9, 3.5841648238956237`*^9}, {3.584164856399335*^9, 
  3.5841648603678384`*^9}, {3.5841664177865877`*^9, 3.584166448863738*^9}, {
  3.584542684358832*^9, 3.5845426960003347`*^9}, {3.584542740824025*^9, 
  3.584542743546377*^9}, {3.584544106980889*^9, 3.5845441305108795`*^9}}],

Cell[BoxData["1643552"], "Output",
 CellChangeTimes->{
  3.5841665328825364`*^9, 3.584166652185644*^9, 3.5841667488883195`*^9, 
   3.5841667873818088`*^9, {3.584166902233759*^9, 3.584166920015192*^9}, {
   3.5841675935767612`*^9, 3.5841676062769823`*^9}, 3.584167989610119*^9, 
   3.584168215923584*^9, 3.5841683578803663`*^9, {3.584168405398389*^9, 
   3.5841684400605783`*^9}, 3.5842084803791704`*^9, 3.584209007448619*^9, 
   3.584529776362877*^9, 3.5845298894742327`*^9, {3.5845300071151295`*^9, 
   3.584530061681065*^9}, {3.5845427356633525`*^9, 3.584542748683006*^9}, 
   3.5845441325111103`*^9, 3.584620509841384*^9, 3.584621273831287*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}]], "Output",
 CellChangeTimes->{
  3.5841665328825364`*^9, 3.584166652185644*^9, 3.5841667488883195`*^9, 
   3.5841667873818088`*^9, {3.584166902233759*^9, 3.584166920015192*^9}, {
   3.5841675935767612`*^9, 3.5841676062769823`*^9}, 3.584167989610119*^9, 
   3.584168215923584*^9, 3.5841683578803663`*^9, {3.584168405398389*^9, 
   3.5841684400605783`*^9}, 3.5842084803791704`*^9, 3.584209007448619*^9, 
   3.584529776362877*^9, 3.5845298894742327`*^9, {3.5845300071151295`*^9, 
   3.584530061681065*^9}, {3.5845427356633525`*^9, 3.584542748683006*^9}, 
   3.5845441325111103`*^9, 3.584620509841384*^9, 3.5846212739503016`*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"tcc`$Reset", "[", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
  "tcc`$Source", "[", 
   "\"\<int cmp(void* x, void* y) {\n        return *(int*)x - *(int*)y;\n    \
}\>\"", "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"tcc`$Link", "[", "]"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{
   RowBox[{"$list", "=", 
    RowBox[{"FFI`$New", "[", 
     RowBox[{"{", 
      RowBox[{"3", ",", "1", ",", "2", ",", "4"}], "}"}], "]"}]}], 
   ";"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"FFI`$LibC", "@", 
   RowBox[{"qsort", "[", 
    RowBox[{"$list", ",", "4", ",", "4", ",", 
     RowBox[{"tcc`$Get", "[", "\"\<cmp\>\"", "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{" ", 
  RowBox[{"FFI`$Read", "[", 
   RowBox[{"$list", ",", "\"\<int\>\"", ",", "4"}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"FFI`$ReleaseData", "[", "$list", "]"}], ";"}], " "}]}], "Input",
 CellChangeTimes->{{3.584166685569893*^9, 3.584166703699175*^9}, {
  3.584542756324978*^9, 3.584542760804547*^9}, {3.5845441551550035`*^9, 
  3.5845441783699493`*^9}}],

Cell[BoxData["9619232"], "Output",
 CellChangeTimes->{
  3.5841667448248196`*^9, 3.5841667889939957`*^9, {3.5841669110948844`*^9, 
   3.5841669213633633`*^9}, {3.584167591921568*^9, 3.584167607687166*^9}, 
   3.5841679916313753`*^9, 3.5841682184369273`*^9, 3.5841683596635942`*^9, 
   3.5841684069415855`*^9, 3.5841684416958094`*^9, {3.5842084820133777`*^9, 
   3.5842085002887*^9}, {3.5842085615060635`*^9, 3.5842085821446857`*^9}, 
   3.584209009394866*^9, 3.584529891527517*^9, {3.584530030489118*^9, 
   3.5845300668627462`*^9}, {3.5845441628749695`*^9, 3.5845441799151354`*^9}, 
   3.5846205122548866`*^9, 3.58462127558851*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "2", ",", "3", ",", "4"}], "}"}]], "Output",
 CellChangeTimes->{
  3.5841667448248196`*^9, 3.5841667889939957`*^9, {3.5841669110948844`*^9, 
   3.5841669213633633`*^9}, {3.584167591921568*^9, 3.584167607687166*^9}, 
   3.5841679916313753`*^9, 3.5841682184369273`*^9, 3.5841683596635942`*^9, 
   3.5841684069415855`*^9, 3.5841684416958094`*^9, {3.5842084820133777`*^9, 
   3.5842085002887*^9}, {3.5842085615060635`*^9, 3.5842085821446857`*^9}, 
   3.584209009394866*^9, 3.584529891527517*^9, {3.584530030489118*^9, 
   3.5845300668627462`*^9}, {3.5845441628749695`*^9, 3.5845441799151354`*^9}, 
   3.5846205122548866`*^9, 3.5846212757005243`*^9}]
}, Open  ]],

Cell[BoxData[{
 RowBox[{"tcc`Exit", "[", "]"}], "\[IndentingNewLine]", 
 RowBox[{"tcc`$Exit", "[", "]"}]}], "Input",
 CellChangeTimes->{{3.584162138173622*^9, 3.584162141050988*^9}, {
  3.584166673516159*^9, 3.5841666753403745`*^9}}],

Cell[BoxData[{
 RowBox[{"FFI`Uninstall", "[", "]"}], "\[IndentingNewLine]", 
 RowBox[{"FFI`$Uninstall", "[", "]"}]}], "Input",
 CellChangeTimes->{{3.584166677900715*^9, 3.5841666802270164`*^9}}]
},
WindowSize->{707, 676},
WindowMargins->{{Automatic, 115}, {-87, Automatic}},
ShowSelection->True,
FrontEndVersion->"11.0 for Microsoft Windows (64-bit) (2016\:5e747\:670828\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[557, 20, 138, 3, 30, "Input"],
Cell[698, 25, 323, 8, 30, "Input"],
Cell[CellGroupData[{
Cell[1046, 37, 1870, 38, 259, "Input"],
Cell[2919, 77, 869, 12, 30, "Output"],
Cell[3791, 91, 880, 12, 30, "Output"],
Cell[4674, 105, 929, 14, 30, "Output"],
Cell[5606, 121, 943, 14, 30, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6586, 140, 1870, 39, 266, "Input"],
Cell[8459, 181, 217, 3, 30, "Output"],
Cell[8679, 186, 229, 3, 30, "Output"],
Cell[8911, 191, 302, 6, 30, "Output"],
Cell[9216, 199, 318, 7, 30, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9571, 211, 1318, 33, 183, "Input"],
Cell[10892, 246, 647, 9, 31, "Output"],
Cell[11542, 257, 708, 11, 31, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[12287, 273, 1132, 31, 192, "Input"],
Cell[13422, 306, 632, 9, 31, "Output"],
Cell[14057, 317, 694, 11, 31, "Output"]
}, Open  ]],
Cell[14766, 331, 233, 4, 52, "Input"],
Cell[15002, 337, 194, 3, 52, "Input"]
}
]
*)

